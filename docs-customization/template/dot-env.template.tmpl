{{- define "external_url" -}}{{- regexFind "https://(.*?)/" . | trimPrefix "https://" | trimSuffix "/" -}}{{- end -}}

# .env settings

<style>
    .md-content__button {
        display: none;
    }
</style>

!!! info

    This is an autogenerated page containing all the settings from the default `.env.docker` file. Below is a quick overview of the most frequently changed sections

    **Pixelfed settings**

    * [App](#app)
    * [Database](#database)
    * [Mail](#mail)
    * [Redis](#redis)
    * [Storage](#storage)

    **Docker settings**

    * [Shared](#docker-shared)
    * [App](#docker-app)
    * [Database](#docker-db)
    * [Proxy](#docker-proxy)
    * [Redis](#docker-redis)
    * [Web](#docker-web)
    * [Worker](#docker-worker)

{{ range .Groups -}}{{- $group := . -}}## {{ .String | title }}

{{ range .Assignments -}}{{- $assignment := . -}}### {{ .Name | title }} {{ " " }} { data-toc-label="{{ .Name }}" }

{{ if .Annotation "dottie/validate" | first | default "" | contains "required" }}<!-- md:flag required -->{{ end }}
{{ if eq .Literal "" }}<!-- md:default none -->
{{ else if eq .Literal .Interpolated }}<!-- md:default `{{ .Interpolated | trim }}` -->
{{ else if .Literal  }}<!-- md:default computed:`{{ .Literal | trim }}` -->
{{ else }}<!-- md:default none --> {{ end }}
{{- with $assignment.Annotation "see" }}<!-- md:flag external-docs {{ first . | trim }} {{ template "external_url" (. | first | trim) }} -->
{{- end }}

{{- with .Documentation true }}

{{ . | trim }}
{{- end }}

{{- with .Annotation "dottie/validate" }}

**Validation rules:**

* `{{ . | first | trim | splitList "," | join "`\n* `" }}`

{{- end }}

{{ end -}}
{{ end -}}
